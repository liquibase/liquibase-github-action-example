-- liquibase formatted sql changeLogId:8f11c9b6-3071-4e16-9a8e-ac95085200d7
--changeset Davide.Moraschi:20220427_1 labels:batch-tracker-dream context:sandbox dbms:postgresql runAlways:false runOnChange:true runInTransaction:true failOnError:true created:2022-04-27  endDelimiter://
create table if not exists dream.batches
(
    date_of_mfg         date,
    production_order_no varchar(12),
    batch_number        varchar(20),
    status_desc         varchar(20),
    sap_matl_no         varchar(18),
    plant_code          varchar(4),
    purchase_order_no   varchar(12)
);

create table if not exists public.batches
(
    id                                             uuid,
    purchase_order_id                              text,
    batch_number                                   varchar(20),
    record_type                                    text,
    material_code_sap                              varchar(20),
    name                                           varchar(255),
    material_id                                    varchar(4),
    material_id_desc                               text,
    mpg_code_desc                                  varchar(75),
    mrp_controller                                 text,
    mrp_controller_desc                            text,
    unreleased_inputs_flag                         text,
    goods_receipt_proc_time                        numeric,
    days_of_supply                                 numeric,
    statistical_delivery_date                      date,
    source_planned_start                           date,
    source_actual_start                            date,
    source_planned_finish                          date,
    source_actual_finish                           date,
    mfg_planned_start                              date,
    mfg_actual_start                               date,
    mfg_planned_finish                             date,
    mfg_actual_finish                              date,
    mfg_brr_planned_start                          date,
    mfg_brr_actual_start                           date,
    mfg_brr_planned_finish                         date,
    mfg_brr_actual_finish                          date,
    qa_brr_planned_start                           date,
    qa_brr_actual_start                            date,
    qa_brr_planned_finish                          date,
    qa_brr_actual_finish                           date,
    sample_planned_start                           date,
    sample_actual_start                            date,
    sample_planned_finish                          date,
    sample_actual_finish                           date,
    test_planned_start                             date,
    test_actual_start                              date,
    test_planned_finish                            date,
    test_actual_finish                             date,
    dispo_planned_start                            date,
    dispo_actual_start                             date,
    dispo_planned_finish                           date,
    dispo_actual_finish                            date,
    ship_planned_start                             date,
    ship_actual_start                              date,
    ship_planned_finish                            date,
    ship_actual_finish                             date,
    due_date                                       date,
    revised_due_date                               date,
    need_by                                        date,
    qty_shipped                                    numeric,
    qty_issued                                     numeric,
    created_at                                     timestamp with time zone,
    updated_at                                     timestamp with time zone,
    deleted_at                                     timestamp with time zone,
    priority                                       integer,
    source_estimated_start                         date,
    source_estimated_finish                        date,
    mfg_estimated_start                            date,
    mfg_estimated_finish                           date,
    mfg_brr_estimated_start                        date,
    mfg_brr_estimated_finish                       date,
    qa_brr_estimated_start                         date,
    qa_brr_estimated_finish                        date,
    sample_estimated_start                         date,
    sample_estimated_finish                        date,
    test_estimated_start                           date,
    test_estimated_finish                          date,
    dispo_estimated_start                          date,
    dispo_estimated_finish                         date,
    ship_estimated_start                           date,
    ship_estimated_finish                          date,
    orig_dispo_planned_start                       date,
    dispo_start_estimate_offset                    integer,
    comments_count                                 integer,
    plant_code                                     varchar(6),
    insp_lot_no                                    varchar(40),
    insp_type                                      text,
    average_inspection_duration                    numeric,
    batch_status                                   text,
    old_id                                         text,
    custom_flag                                    text,
    market_segment                                 text,
    inputs_planned_start                           date,
    inputs_planned_finish                          date,
    inputs_estimated_start                         date,
    inputs_estimated_finish                        date,
    inputs_actual_start                            date,
    inputs_actual_finish                           date,
    detailed_test_status_flag                      text,
    ud_code                                        varchar(16),
    date_order_released                            date,
    requirement_date                               date,
    out_of_stock                                   date,
    queued_for_sap_export                          boolean,
    insp_start_date                                date,
    purchase_order_line_no                         integer,
    vendor_batch_number                            text,
    process_order_number                           text,
    purchasing_group                               text,
    market_code                                    text,
    material_category                              text,
    active_due_date                                date,
    tests_percent_approved                         integer,
    test_risk_status                               risk_status,
    expiration_date                                date,
    ud_code_description                            text,
    market_segment_description                     text,
    insp_type_description                          text,
    lot_hold_flag                                  text,
    lot_hold_details                               text,
    dispo_notes_1                                  text,
    dispo_notes_2                                  text,
    dispo_notes_3                                  text,
    full_mrp_controller                            text,
    full_market_segment                            text,
    full_insp_type                                 text,
    queueable_for_sap_export                       boolean,
    risk_status_due_date                           risk_status,
    risk_status_revised_due_date                   risk_status,
    dispo_active_finish_revised_due_date_diff_days integer,
    ready_for_release                              boolean,
    batch_number_or_purchase_order_id              text,
    is_purchase_order                              boolean,
    full_ud_code                                   text,
    earliest_date                                  date,
    latest_date                                    date,
    longest_tag_length                             integer,
    source_risk_status                             risk_status,
    sample_risk_status                             risk_status,
    mfg_risk_status                                risk_status,
    mfg_brr_risk_status                            risk_status,
    qa_brr_risk_status                             risk_status,
    dispo_risk_status                              risk_status,
    inputs_risk_status                             risk_status,
    ship_risk_status                               risk_status,
    source_progress                                progress,
    sample_progress                                progress,
    test_progress                                  progress,
    mfg_progress                                   progress,
    mfg_brr_progress                               progress,
    qa_brr_progress                                progress,
    dispo_progress                                 progress,
    inputs_progress                                progress,
    ship_progress                                  progress,
    auto_move_dispo_and_queue                      boolean,
    inventory_status                               text,
    lot_cancelled                                  boolean,
    queued_for_sap_export_by_user_id               integer,
    queued_for_sap_export_at                       timestamp with time zone,
    production_scheduler                           text,
    external_test_planned_start                    date,
    external_test_planned_finish                   date,
    external_test_actual_start                     date,
    external_test_actual_finish                    date,
    external_sample_planned_start                  date,
    external_sample_planned_finish                 date,
    external_sample_actual_start                   date,
    external_sample_actual_finish                  date,
    external_sample_progress                       progress,
    external_sample_risk_status                    risk_status,
    external_test_progress                         progress,
    external_test_risk_status                      risk_status,
    external_sample_estimated_start                date,
    external_sample_estimated_finish               date,
    external_test_estimated_start                  date,
    external_test_estimated_finish                 date,
    auto_queue_if_applicable                       boolean,
    disable_auto_updates                           boolean,
    quantity_delivered                             numeric,
    proc_order_status                              text,
    full_material_code_sap                         text,
    vendor_name                                    text,
    need_by_updated_by_user_id                     integer,
    need_by_updated_at                             date,
    target_quantity                                numeric,
    sample_machine_estimated_finish                date,
    test_machine_estimated_finish                  date,
    mfg_brr_machine_estimated_finish               date,
    qa_brr_machine_estimated_finish                date,
    dispo_machine_estimated_finish                 date,
    date_of_mfg                                    date,
    priority_manufacturing_at_risk                 date
);

